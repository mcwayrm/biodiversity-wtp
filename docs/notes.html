<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.6.42" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<meta name="author" content="Raahil Madhok" />
<meta name="author" content="Matt Braaksma" />
<meta name="author" content="Ryan McWay" />
<meta name="author" content="Jovin Lasway" />

<title>The Economic Value of Biodiversity in India</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<!-- htmldependencies:E3FAD763 -->

  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var head = document.getElementsByTagName("head")[0];
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.href = "https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css";
      head.appendChild(link);

      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js";
      script.async = false;
      script.addEventListener('load', function() {
        var mathElements = document.getElementsByClassName("math");
          var macros = [];
          for (var i = 0; i < mathElements.length; i++) {
            var texText = mathElements[i].firstChild;
            if (mathElements[i].tagName == "SPAN") {
              window.katex.render(texText.data, mathElements[i], {
                displayMode: mathElements[i].classList.contains('display'),
                throwOnError: false,
                macros: macros,
                fleqn: false
              });
            }
          }
      });
      head.appendChild(script);
    });
  </script>
  

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <div id="quarto-toc-target"></div>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Economic Value of Biodiversity in India</h1>
<p class="subtitle lead">Running Notes</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Raahil Madhok </p>
             <p>Matt Braaksma </p>
             <p>Ryan McWay </p>
             <p>Jovin Lasway </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#project-description" id="toc-project-description">Project Description</a></li>
  <li><a href="#notes" id="toc-notes">Notes</a></li>
  </ul>
</nav>
<section id="project-description" class="level2">
<h2>Project Description</h2>
<p>This project aims to produce the first measure of willingness to pay (WTP) for biodiversity. This provides a monetary measure to value biodiversity which can be applied to a wide variety of applications in environmental economics and natural captial accounting. The data relies on E-bird observations of diverse bird species observations. The sample is limited to local, long-time users who are residents (not tourists) in India. The methodology to calculate WTP relies on a revealed preference throughh the random utility model (RUM). The RUM determines the value of seeking out diverse species of birds by comparing the value of alternative counterfactual bird siting locations and the cost to go to these counterfactuals. Monetary value is determined through the RUM by estimating the travel cost of the reveal preference compared to counterfactual locations.</p>
</section>
<section id="notes" class="level2">
<h2>Notes</h2>
<p>For notes, we present the most recent first so that notes are chronologically most recent.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
8/27/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Ryan, Jovin</p>
</blockquote>
<section id="todo" class="level1">
<h1>TODO:</h1>
<ul>
<li><strong>Matt</strong>: We need to meet with you to discuss working on this with MSI</li>
<li><strong>Jovin</strong>: Responsible for Shift</li>
<li><strong>Ryan</strong>: Responsible for Share</li>
</ul>
<section id="plan-to-estimate-shift-share" class="level2">
<h2>Plan to Estimate Shift-Share</h2>
<ol type="1">
<li>Merge the Species range data with the migratory species data
<ul>
<li>Species range data: base-data/species/BOTW_2024_2.gpkg</li>
<li>Migratory species data: base-data/species/species_list_categorized.csv</li>
<li>Merge by: scientific_name</li>
<li>Result: species level data with range map and classifier for migratory</li>
</ul></li>
<li>For each country <span class="math inline">j</span>, calculate <span class="math inline">\gamma_j</span></li>
</ol>
<p><span class="math display">
\gamma_j = \sum_{s =\text{total num of species in j}}^S \frac{\text{species range overlap India}_{sj}}{S_j}
</span></p>
<pre><code>1. Count the number of species $s$ in $j$
    - Species range data: base-data/species/BOTW_2024_2.gpkg
    - India Borders: data/shp/district-2011
    - Need to make one shape (spatial union) so any intersection with India shape
    - Indicator for each species if any overlap of species with India borders
2. Spatial overlap of species $s$ range over the country border of India. This will create some fraction. 
    - Calculate sqkm for India shapefile one time (part 1)
    - Spatial inner join of range $s$ on India. 
    - Calculate sqkm for the inner join (part 2)
    - Divide part 2 by part 1 to get the fraction of overlap for species range over India borders
3. Combine to make $\gamma_j$ using the weighted sum $\sum_s$
    - Spatial intersection of species range $s$ with countries in the flu dataset
    - Create the weight $S_j$ by counting the number of indicators for intersecting ranges with $j$
    - Create $\gamma_j$ for each $j$ by summing fractions in (2) divided by weight $S_j$
    - Country $j$ Shapefiles: TODO.</code></pre>
<ol start="3" type="1">
<li><p>Create the shift by merging <span class="math inline">\gamma_j</span> with the flu data - Flu Data: data/clean/flu-data.csv - Result is time series by <span class="math inline">t</span> <span class="math display">
Shift_t = \sum_{j = country}^J flu_{jt} \times \gamma_j
</span></p></li>
<li><p>Create the share for each hotspot <span class="math inline">d</span></p></li>
</ol>
<p><span class="math display">
Share_d =  \sum_s \frac{\text{Indicator for migratory}_{sd}}{S_d}
</span></p>
<pre><code>1. Start with e-bird data. For each hotspot $d$ get the number of unique species observed in the data
    - e-bird data: Ask Matt what is the best way to do this given the current workflow. 
2. Merge in the migratory data on these species for each hotspot $d$
    - Migratory species data: base-data/species/species_list_categorized.csv
    - Merge by: scientific_name
3. Create the share variable as weighted sum for hotspot $d$
    - For hotspot $d$, count indicator for migratory. 
    - For hotspot $d$, get count of unique species $S_d$
    - Then construct sum of the fractions. </code></pre>
<ol start="5" type="1">
<li>Create the IV by multiplying the shift by the share for each hotspot <span class="math inline">d</span></li>
</ol>
<p><span class="math display">
IV_{dt} = shift_t \times share_d
</span></p>
</section>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
8/15/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Ryan, Matt, Raahil, Jovin</p>
</blockquote>
<section id="todo-1" class="level1">
<h1>TODO:</h1>
<ul>
<li><strong>Matt</strong>: Demean data for State x month fixed effect and user fixed effects</li>
<li><strong>Matt</strong>: Resolve imputing species richness by estimating correlation of e-bird to bird life data and deflate value
<ul>
<li><strong>Matt</strong>: Degree of Imputation: Summary stats on % of missing in observed and counterfactual data</li>
</ul></li>
<li><strong>Jovin</strong>: Constructing the shift-share IV</li>
</ul>
<section id="agenda" class="level2">
<h2>Agenda</h2>
<ol type="1">
<li>Estimation of WTP
<ul>
<li>negative values came from mismatched polygons
<ul>
<li>Difference from the clipped calipers instead of the original simple circles</li>
</ul></li>
<li>weeks sometimes were only 53 (not 54). Solved with iso-week formating that allows for more merging of site attributes</li>
</ul></li>
<li>Data issue
<ul>
<li>we don’t observe species richness</li>
<li>So we are imputing with range maps</li>
<li>When there is missing, we currently fill with species map</li>
<li>Possible species ranges is always higher than recorded value from e-birders</li>
<li>So the imputed values always are super high when missing, and then this makes our estimates really weird.
<ul>
<li>This penalizes the choice. Because counterfactual choice has huge species richness</li>
</ul></li>
<li>Potential Solution: replace missing with historical average (or minimum average) for each district or state in the same time period.
<ul>
<li>Impute that for hotspots with missing data</li>
</ul></li>
<li>Potential Solution: correlation of bird life data and e-bird observations
<ul>
<li>Then we can just deflate imputed value that rescales this to the e-bird values</li>
</ul></li>
<li>What is the main source of missing value?
<ul>
<li>want summary stats on % of missing in observed and counterfactual data</li>
<li>Could make this seasonal species richness for imputed value</li>
</ul></li>
</ul></li>
<li>Fixed Effects Issue
<ul>
<li>NA for standard errors when adding individual fixed effects</li>
<li>Running with python on MSI</li>
<li>Could attempt to manually demean data (user fixed effects) before running</li>
<li>State x month fixed effect and user fixed effects
<ul>
<li>Robustness by district x month fixed effects</li>
<li>This will just be more intense</li>
</ul></li>
<li>mlogit does not allow for fixed effects</li>
<li>The key is to demean within each group
<ul>
<li>hdfe is package in Stata</li>
</ul></li>
</ul></li>
<li>Instrumental Variables
<ul>
<li>Have a map data for bird migration routes
<ul>
<li>Only found 2 species public for India</li>
<li>There are other species we can request access to</li>
</ul></li>
<li>Data avaliable for avian flu outbreak
<ul>
<li>H5N1</li>
<li>2005 - 2025</li>
</ul></li>
<li>Combining the two data sets we can assign outbreaks to specific species that migrate to India</li>
<li>Human cases of avian flu deaths should be controlled for in IV estimation</li>
<li>If we have a shift-share IV, do we need to know the flyways?
<ul>
<li>If this is the only channel, then we don’t need to actually need to know the origin of the bird</li>
</ul></li>
</ul></li>
</ol>
<p><span class="math display">
IV_{dt} = shift_t \times share_d
</span></p>
<p><span class="math display">
IV_{dt} = \text{Wild Avian Flu}_t \times \text{% of species pool from migration}_d
</span></p>
<p><span class="math display">
Shift_t = \sum_{j = country}^J flu_{jt} \times \gamma_j
</span></p>
<p><span class="math display">
\gamma_j = \sum_{s =\text{total num of species in j}}^S \frac{\text{species range overlap India}_{sj}}{S_j}
</span></p>
<ul>
<li>Assumes a uniform distribution of species across their species range
<ul>
<li>This is an improvement over distance from India as the weight</li>
</ul></li>
</ul>
<p><span class="math display">
Share_d =  \sum_s \frac{\text{Indicator for migratory}_{sd}}{S_d}
</span></p>
</section>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
8/1/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Ryan, Matt, Raahil</p>
</blockquote>
<section id="todo-2" class="level1">
<h1>TODO:</h1>
<ul>
<li><strong>Matt</strong>: Re-estimating WTP using new sample of users (expanded)</li>
<li><strong>Matt</strong>: Adding a Visual: Attempting to run the simple regression of biodiversity and hotspot visitations</li>
<li><strong>Jovin</strong>: Complete the IV design by finding accompanying data. Maps of migration patterns. Papers to cite for this phenomenon.</li>
<li><strong>Raahil/Ryan</strong>: Write up the model in LaTeX</li>
</ul>
<section id="agenda-1" class="level2">
<h2>Agenda</h2>
<ol type="1">
<li>Figures describing variation
<ul>
<li>Ryan presented some post estimation figures we tabled for later</li>
<li>Matt presented some maps showing variation over space</li>
<li>Raahil suggested we produce a margins plots. We run an endogenous TWFE model of species richness on number of visitors. Then we plot the marginal effects at different levels of biodiversity.</li>
</ul></li>
<li>First estimates of WTP using super users
<ul>
<li>Matt is able to run the conditional logit model. Not able to run the mixed logit model</li>
<li>Our <span class="math inline">\alpha</span> for price has the wrong sign. This makes biodiversity WTP a negative value</li>
<li>We think that the sample may be too restrictive resulting in weird results</li>
<li>Additionally, Matt is working through some data issues in the counterfactual data set that is dropping 1.1% of site attributes</li>
<li>And there is colinearity amongst site attributes when running the conditional logit, so they are currently dropped in the model run.</li>
</ul></li>
<li>Modeling updates using IV method
<ul>
<li>Ryan has a clear idea of how to model the IV into our mixed logit model</li>
<li>The key is to rely on Jacob Bradt’s model using control functions.</li>
<li>We estimate the first stage linear regression. Residualize. And use the residuals in our discrete choice method (mixed logit).</li>
<li>We will need to bootstrap the 2nd stage in our to recover standard errors.</li>
</ul></li>
<li>Bird Migration Instruments
<ul>
<li><ol type="i">
<li>Migration patterns: From the literature I’ve compiled so far:</li>
</ol>
<ul>
<li>Peak arrivals: August - November</li>
<li>Peak departures: February - April</li>
<li>Low migration periods: May - July, and December - January</li>
</ul></li>
<li>The Inbound migration: Birds arrive in India primarily from the northern breeding grounds, especially in Mongolia, Kazakhstan, and Siberia, during the August-November window to overwinter in wetlands and coastal areas.</li>
<li>The Outbound migration: Birds depart February-April, returning to their breeding sites for nesting.</li>
<li><ol start="2" type="i">
<li>Drivers of bird migration and IV framework: Ecology literature indicates that migration along the Central Asian Flyway is mainly driven by (i) Ecological reasons, india’s wetlands, lakes, and agricultural landscapes provide abundant food and shelter during winter, (ii) Climatic reasons: Wrmer winter conditions compared to the northern latitudes reduce suruval stress (iii) Stopover importance: Key sites such as Chilika, Keoladeo, Pong Dam, etc serve as staging areas for fueling before onward flights.</li>
</ol></li>
<li>Recent literature uses environmental shocks as instruments (Noack et al., 2024; Meng et al, 2025). For India’s bird migration context, two IV strategies appear promising.
<ul>
<li>Weather shock IV: Baseline district exposure (from our eBird) interacting with NVDI and weather anomalies in the breeding grounds.</li>
<li>Disease shock IV: I find this is more interesting because a recent work by Yang et al., 2024 at Nature Communications finds avian influenza outbreaks do not trigger migration but do affect survival and presence of birds at the Indian stopovers to a very large extent. This makes it a credible instrument because: (i) outbreaks are exogenous to the local economic variables and (ii) outbreak timing is tied to a peak of migration window/CAF (Aug-Nov, Feb-Apr) in India, allowing shocks to coincide with relevant bird presence.</li>
</ul></li>
<li><ol start="3" type="i">
<li>Data collection: Potential outbreak data sources, shapefiles include (i) FAO EMPRES-i+; (ii) WOAH/WAHIS, which tracks the outbreak locations, date, disease type, host species, and status. Lastly, GISAID shapefile data, which is an avian influenza sequence database, tracks the outbreak locations (used in Elbe &amp; Buckland-Merrett, 2017, Global Challenges Journal; Yang et al, 2024, Nature Communications).</li>
</ol></li>
<li><ol start="4" type="i">
<li>Next step: Performing a spatial join between outbreak data and our ebird-based hotspots, aggregating outbreak counts to the district/hotspot-year panel level. I think this will allow us to construct the avian influenza IV as = Baseline exposure in district/hotspot d x outbreak shock at time t.</li>
</ol></li>
</ul></li>
</ol>
</section>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
6/2/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Ryan, Matt, Jovin, Raahil</p>
</blockquote>
<section id="todo-3" class="level1">
<h1>TODO:</h1>
<ul>
<li><strong>Matt</strong>: Finish species richness site attribute (cluster-time level)</li>
<li><strong>Matt</strong>: Finish computing congestion site attribute</li>
<li><strong>Matt</strong>: Check why sample size so big. Check number of elements in the choice set for validation.</li>
<li><strong>Matt/Ryan</strong>: Compute species richness in radius <em>around home</em> (varying at same time unit as other species richness attribute)</li>
<li><strong>Jovin</strong>: Fix travel cost. I suggest checking it over with Matt/Ryan</li>
<li><strong>Raahil/Ryan</strong>: Work through paper framing</li>
</ul>
<section id="agenda-2" class="level2">
<h2>Agenda</h2>
<ol type="1">
<li>Species Richness</li>
</ol>
<ul>
<li>Maps for imputation can’t have the shannon index. Because we don’t have abundance counts</li>
<li>But we can do an index for the e-bird data hotspots</li>
<li>Estimates of bird life and expected species richness</li>
<li>Monthly values or seasonal values</li>
</ul>
<ol start="2" type="1">
<li>Other Site Attributes</li>
</ol>
<ul>
<li>Have one site data set for temp, rain, and tree cover</li>
<li>This is at the hotspot cluster level</li>
</ul>
<ol start="3" type="1">
<li>Congestion</li>
</ol>
<ul>
<li>Ready to go code, just not run yet</li>
<li># of users at hotspot cluster monthly</li>
</ul>
<ol start="4" type="1">
<li>Travel Cost</li>
</ol>
<ul>
<li>Jovin has choice set and code that estmates this for a first attempt</li>
<li>Matched to GDP data to impute wages</li>
<li>Estimate Euclidean distance between households and hotspot clusters</li>
<li>Final data for RUM should be choice set dimensions (for our checks)</li>
</ul>
<ol start="5" type="1">
<li>Measure of Experience at the Individual Level</li>
</ol>
<ul>
<li>Counts of trips (counter)</li>
<li>Count for # of different hotspots (counter)</li>
<li>So ratio tells us if you have preference for location (“Habit Formation”).
<ul>
<li>Low ratio is little location preference</li>
<li>High ratio is high location preference</li>
</ul></li>
</ul>
<ol start="6" type="1">
<li>Conceptual</li>
</ol>
<ul>
<li>Birds vs. non-bird still valued as travel cost. So both are still measures of nature recreation.</li>
<li>Monetizing value &gt;&gt; Add in contribute to GEP or ecosystem service value literature.</li>
<li>Novelty: Why is WTP lower in Developing Countries? Welfare for environmental quality in envirodevonomics framework (Env-Dev framing)</li>
</ul>
</section>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
5/16/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Ryan, Matt, Jovin, Raahil</p>
</blockquote>
<section id="todo-4" class="level1">
<h1>TODO:</h1>
<ul>
<li>Seperate meetings for Matt/Jovin (coding) and Ryan/Raahil (conception) for our specializations</li>
</ul>
<section id="agenda-3" class="level2">
<h2>Agenda</h2>
<ol type="1">
<li>Finalize the site attribute data and create the master dataset</li>
</ol>
<ul>
<li>Matt and Ryan – complete by next meeting (May 16)</li>
<li>We have monthly temperature and rainfall</li>
<li>We have annual tree cover data</li>
<li>These are as zonal statistics (average for 10KM radius of hotspot)
<ul>
<li>In E-bird, we have the average distance walked around hotspot</li>
<li>Or do we avoid this work because temp, rain, and tree cover does not vary much at such a small spatial scale.</li>
<li>Temp, rainfall, and tree are at higher resolutions. So as long as the radius is less than the input data this will not vary.</li>
</ul></li>
<li>We need to think more about mapping of hotspots and hotspot clusters.</li>
<li>Need to add a fourth site attribute: congestion
<ul>
<li>How frequently other users are using this site?</li>
<li>Aggregate number of user trips for each hotspot but will need to do this as a lag (week before)</li>
<li>So this is expected congestion.</li>
</ul></li>
<li>We need to transform this into a panel of counterfactual sets appended to the observed trips.
<ul>
<li>Not balanced across counterfactual trips and time</li>
</ul></li>
</ul>
<ol start="2" type="1">
<li>Calculate travel costs – see notes for guidance; this will be added to the site attribute script</li>
</ol>
<ul>
<li>For GDP per capita data, use gridded data from here and extract the value closest to each users’ home. Then use the formula from Kolstoe/cameron or lloyd-smith to calculate travel costs.</li>
<li>Jovin – complete by next meeting (May 16)</li>
<li>Collected 2014-2024 GDP per capita data</li>
<li>Laptop trouble estimating, working with MPC.</li>
<li>Could run the travel cost with a small random sample to make this managable for Jovin’s laptop capacity.</li>
<li>Can re-run the pipeline so we are running for only frequent users (1.6M instead of the 3M)</li>
</ul>
<ol start="3" type="1">
<li>Species richness</li>
</ol>
<ul>
<li>Matt and Ryan – bring three ideas for next meeting (May 16)</li>
<li>Close to being done (Matt taking the lead)</li>
<li>Taking raw e-bird data and getting monthly counts</li>
<li>Need to translate from hotspots to hotspot clusters</li>
<li>Species ranges (for missing) shapefiles are crashing the code.</li>
<li>All of this is to get a species at a hotspot so we can turn this into a richness index
<ul>
<li>Will want this merged as richness for same month/week from previous year</li>
<li>In the app, you can see in real-time species count from their favorite places.</li>
<li>So likely quite responsive. Last week is best</li>
<li>Can also do monthly to replicate results from month last year from Kolsto paper method.</li>
</ul></li>
<li>We aim to use the simpson and shanon index from <code>vegan</code> package</li>
</ul>
<ol start="4" type="1">
<li>Individual Attributes</li>
</ol>
<ul>
<li>With individual fixed effects, we partial out any time-invariant</li>
<li>From the e-bird data:
<ul>
<li>How frequently you went in the past year</li>
<li>Average distance traveled in the past year</li>
<li>Is there any measure of learning over time? Value of recreation is not static
<ul>
<li>Experience index</li>
<li>Cumulative experience (simple counter of trips up unti that point)</li>
<li>Could weight this by how much you walk, and taxonomy of bird level data (raw text file of trip-species level)</li>
<li>Could collapse species count to trip level.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="project-management" class="level2">
<h2>Project Management</h2>
<ul>
<li>Meetings need to be in person.</li>
<li>Jovin update meeting calendar</li>
<li>Start assigning tasks instead of asking for volunteers</li>
<li>Need to come up with a specialization of tasks.</li>
<li>Coding and Data: Matt (lead), Jovin, Ryan (assist)</li>
<li>Conceptualize: Ryan (lead), and Raahil
<ul>
<li>How our model departs from workhouse.</li>
<li>Literature review for our novelty</li>
</ul></li>
<li>Some tasks:
<ul>
<li>Google maps driving time</li>
<li>inaturalist species richness mapping</li>
</ul></li>
</ul>
</section>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
5/15/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Ryan, Matt</p>
</blockquote>
<section id="coding-notes" class="level2">
<h2>Coding Notes</h2>
<ul>
<li>Ryan is taking lead on estimating travel cost.</li>
<li>We need a seperate hotspots shapefile for running zonal stats</li>
<li>We need unique hotspot site IDs and hotspot cluster IDs</li>
<li>Explor alternatives to making hotspot clusters</li>
<li>Name for the master data</li>
<li>Need to add attributes to hotspot clusters (script 4)</li>
<li>Mapping of hotspot cluster ID to hotspot IDs</li>
</ul>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
5/2/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Raahil, Matt</p>
</blockquote>
<section id="agenda-4" class="level2">
<h2>Agenda</h2>
<ol type="1">
<li>Site attributes data progress
<ul>
<li>In progress</li>
</ul></li>
<li>Individual attributes data progress</li>
<li>Coding sample selection progress
<ul>
<li>Done, flexible to time period and years (e.g. quarterly for at least 8 years)</li>
</ul></li>
</ol>
</section>
<section id="site-attributes" class="level2">
<h2>Site Attributes</h2>
<ul>
<li>Still gathering geospatial data
<ul>
<li><a href="https://lpdaac.usgs.gov/products/mod44bv061/">MODIS VCF forest cover</a></li>
<li><a href="https://cds.climate.copernicus.eu/datasets/reanalysis-era5-land?tab=download">Copernicus ERA5-Land</a>
<ul>
<li><a href="https://bluegreen-labs.github.io/ecmwfr/">ecmwfr</a>, R API interface</li>
</ul></li>
</ul></li>
<li>Run zonal statistics on buffer around hotspots</li>
<li>If data becomes to large to easily share, we can start using Globus and MSI’s tier 2 data storage</li>
</ul>
</section>
<section id="next-tasks" class="level2">
<h2>Next tasks</h2>
<ol type="1">
<li>Merge site and individual attributes to make master dataset</li>
<li>Calculate travel cost
<ul>
<li>Start with linear distance for now</li>
<li>Calculate cost
<ul>
<li>Refer to Lloyd-Smith and Cameron/Kolstoe</li>
<li>Travel cost = 2 (round trip) x distance x 1/3 x wage (from GDP)</li>
</ul></li>
</ul></li>
<li>Species Richness
<ul>
<li>Decide on method:
<ul>
<li>Weitzman index</li>
<li>iNaturalist</li>
<li>Simpson index</li>
<li>Shannon index</li>
</ul></li>
</ul></li>
<li>Looking ahead
<ul>
<li>Look at code for estimating mixed logit with big data
<ul>
<li><a href="https://github.com/joemolloy/fast-mixed-mnl">mixl</a>, C++ based R package</li>
<li><a href="https://xlogit.readthedocs.io/en/latest/index.html">xlogit</a>, GPU-Accelerated Python Package</li>
</ul></li>
<li>How to properly weight the WTP for aggregation <!-- - [Weighting the Evidence: A Rank-Dependent Model of Outdoor Recreation](https://doi-org.ezp1.lib.umn.edu/10.1086/732185) --></li>
<li>Research how to include fixed effects in utility functions (alternative specific constant)
<ul>
<li>User fixed effects</li>
<li>hotspot fixed effects</li>
</ul></li>
</ul></li>
</ol>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" data-collapsse="true">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
4/25/2025
</div>
</div>
<div class="callout-body-container callout-body">
<blockquote>
<p>Matt, Ryan</p>
</blockquote>
<section id="tasks" class="level2">
<h2>Tasks:</h2>
<ul>
<li>Matt: Download data and share</li>
<li>Ryan: Start writing pseudocode in the new scripts.</li>
<li>Both: Play with ClimateR</li>
</ul>
</section>
<section id="site-attributes-1" class="level2">
<h2>Site Attributes</h2>
<ul>
<li>Limitation:
<ul>
<li>It takes time to build GIS data. So a lot of the attributes are not updated for 2024/25</li>
<li>ClimateR</li>
</ul></li>
<li>Division of the attributes to collect
<ul>
<li>Protected area (binary or distance) – fuzzy borders leads to spillovers
<ul>
<li>Matt</li>
<li>WDPA (https://www.protectedplanet.net/en/thematic-areas/wdpa?tab=WDPA)</li>
</ul></li>
<li>Tree cover – higher willingess to pay for forest
<ul>
<li>Matt</li>
<li>https://data.fs.usda.gov/geodata/rastergateway/treecanopycover/</li>
<li>https://data.globalforestwatch.org/</li>
<li>https://glad.umd.edu/dataset/global-2010-tree-cover-30-m</li>
<li>Worse comes to worse we use the ESA data</li>
<li>Or we could use NDVI data as a proxy.</li>
</ul></li>
<li>Rainfall (monthly) - seasonality
<ul>
<li>Ryan</li>
<li>https://ftp.cpc.ncep.noaa.gov/GIS/GRADS_GIS/GeoTIFF/GLB_DLY_PREC/</li>
<li>CHRIPS SPI data</li>
<li>https://mikejohnson51.github.io/climateR/index.html</li>
</ul></li>
<li>Temperature (monthly) - seasonality
<ul>
<li>Ryan</li>
<li>GISS Surface Temperature Analysis (GISTEMP v3)</li>
<li>Surface air temperature (no ocean data), 250km smoothing (9 MB)</li>
<li>Might need the land mask</li>
<li>https://data.giss.nasa.gov/gistemp/</li>
</ul></li>
<li>Distance to the coast – species gradient to the coast
<ul>
<li>Ryan</li>
<li>Dissolve the districts data.</li>
<li>Make a polyline and measure distance to the nearest line</li>
</ul></li>
<li>Species richness from the previous week (expectation) – and any other measures of biodiversity
<ul>
<li>Both Matt and Ryan</li>
<li>Weitzmen index using ebird data to generate diversity score</li>
<li>https://scholar.harvard.edu/files/weitzman/files/on_diversity.pdf</li>
<li>Validate with inaturalist data on birds for india</li>
<li>Could test a couple of different indices</li>
</ul></li>
</ul></li>
<li>How we are sharing the site attribute data
<ul>
<li>Matt will have the GDrive link.</li>
</ul></li>
<li>Updating the config files
<ul>
<li>Once we have data download</li>
</ul></li>
<li>Start script to merge site attributes to sites
<ul>
<li>What to do about 4.demographics. Seems like that should be site attributes.</li>
<li>Noteably, some of the data will need to become panel.
<ul>
<li>Rainfall</li>
<li>Temperature</li>
<li>Protected Areas</li>
<li>Tree cover</li>
<li>species richness (we need to dig some that has a time dimension)</li>
</ul></li>
<li>Static:
<ul>
<li>Distance to coast</li>
</ul></li>
</ul></li>
</ul>
</section>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
4/18/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Raahil, Matt, Jovin, Ryan</p>
</blockquote>
<section id="sample-selection-updates" class="level2">
<h2>Sample Selection Updates</h2>
<ul>
<li>different biodiversity levels by incorporating interaction terms in locals and tourists. WTP for nature tourism vs WTP for nature recreation or biodiverstiy
<ul>
<li>If we estimate both, then we can compare both measures. We can also place it within the larger literature of many WTP for both subsets of ecosystem services and the population using those services.</li>
<li>Broadly compare conservation, nature recreation, tourism, or biodiversity</li>
<li>We need to frame this as a development paper as the lambda in the Envirodevonomics paper</li>
</ul></li>
<li>Frequency of observations are consistent over time and potentially visits near protected areas.
<ul>
<li>Need to capture seasonanlity (time fixed effects)</li>
<li>Need to consider some aspect of congestion (can calculate that as a site attribute)</li>
<li>If you go two months a year you are less likely to be a tourist</li>
</ul></li>
</ul>
</section>
<section id="literature-review-updates" class="level2">
<h2>Literature Review Updates</h2>
<ul>
<li>We can uses species richness as an explanatory variable in the model. But could add other biodiversity measures beyond bird diversity.</li>
<li>Need to think about how to frame this in the developing context instead of the environment context</li>
<li>Very few WTP for environmental quality in development economics space</li>
<li>Would be great if our WTP measure could be placed within a welfare model so we can make counterfactual statements
<ul>
<li>Need to have homogenous agents to aggregate for welfare gains &gt;&gt; e-bird users are not representative of population</li>
<li>Could overcome this by population demographic weights to make e-bird users representative</li>
<li>But welfare statements are a big improvement over the other e-bird papers</li>
</ul></li>
<li>Could explore the WTP measure of space and time. So we go beyond the cross-sectional estimates in the literature
<ul>
<li>If we have 1st and 2nd moment, then we can assign individuals an individual WTP.</li>
</ul></li>
</ul>
</section>
<section id="grant-proposal" class="level2">
<h2>Grant Proposal</h2>
<ul>
<li>Jovin will provide an update.</li>
</ul>
</section>
<section id="initial-results-by-raahil" class="level2">
<h2>Initial Results by Raahil</h2>
<ul>
<li>We are getting coverage of the country</li>
<li>Some overlap of population density and users &gt;&gt; likely representative</li>
<li>Most hotspots and users are in the south (consistent with e-birder users)</li>
<li>Hotspots data could be weighted by visits</li>
<li>Should plot protected areas overlapping hotspots</li>
<li>Demographic t-test shows e-bird users are richer on average. But we can use this to back out our inverse weight for the welfare calculations
<ul>
<li>E-bird users are selecting into this where there are richer places (so can afford this hobby)</li>
</ul></li>
</ul>
</section>
<section id="tasks-1" class="level2">
<h2>Tasks</h2>
<ul>
<li>How do we distinguish ourselves from the Pacific Northwest paper Kolestet 2017</li>
<li>First pass of the sample: users who use this at least 2 months out of the year</li>
<li>Make two new scripts:
<ul>
<li>Merging in site attributes (Can merge in satilette data – radius around the centriod and take the mean – and district data about the site attribtues – merge on district ID)
<ul>
<li>Protected area (binary or distance) – fuzzy borders leads to spillovers</li>
<li>Tree cover – higher willingess to pay for forest</li>
<li>Rainfall (monthly) - seasonality</li>
<li>Temperature (monthly) - seasonality</li>
<li>Distance to the coast – species gradient to the coast</li>
<li>Species richness from the previous week (expectation) – and any other measures of biodiversity</li>
</ul></li>
<li>Estimating the RUM via the mixed multinominal logit</li>
</ul></li>
<li>Email tag for grant proposals</li>
<li>Make a script into a single PDF</li>
</ul>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
3/31/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Raahil, Matt, Jovin</p>
</blockquote>
<section id="sample-selection-discussion" class="level2">
<h2>Sample Selection Discussion</h2>
<ul>
<li>We want to ensure that the sample of ebird observers is representative
<ul>
<li>Remove tourists</li>
<li>Remove infrequent users</li>
</ul></li>
<li>Potential strategies
<ul>
<li>Limit to users that log at least a certain number of times per month</li>
<li>Exclude users that post outside of protected areas</li>
<li>Exclude users that include tourism tags in text variable(e.g. “ecolodge”)</li>
</ul></li>
</ul>
</section>
<section id="tasks-2" class="level2">
<h2>Tasks</h2>
<ul>
<li>Matt/Jovin: descriptive analysis on data to determine distributions of frequent users
<ul>
<li>Complete by 4/18</li>
</ul></li>
</ul>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
3/21/2025
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Raahil, Matt, Ryan, Jovin</p>
</blockquote>
<section id="action-items" class="level2">
<h2>Action Items:</h2>
<ul>
<li>Everyone confirms that we can run the first 3 basic scripts</li>
<li>Starting the annotated bibliography with 10 most important papers:
<ul>
<li>WTP for envrionmental quality</li>
<li>WTP in developing countries using travel cost</li>
<li>Review of mixed logit methodology</li>
</ul></li>
<li>Next week we need to talk about sample selection in depth next week</li>
</ul>
</section>
<section id="division-of-tasks" class="level1">
<h1>Division of Tasks:</h1>
<ul>
<li><p>Review mixed logit method</p></li>
<li><p>(Matt) Review of WTP in developing countries using travel cost methods</p></li>
<li><p>(Ryan) Review of WTP methods for environmental quality</p></li>
<li><p>(Ryan) Method to estimate welfare effects (some exogenous shock)</p></li>
<li><p>(Raahil + Jovin + Matt) Determining the sample population criteria – important early step</p></li>
<li><p>(Raahil) Gathering data for population demographics (SHRUG, DHS, etc.)</p></li>
<li><p>Ways to annoate bibliography:</p>
<ul>
<li>paper title + journal, research question, research design (e.g. stated preference), data/sample size, result (i.e. WTP estimate)</li>
</ul></li>
<li><p>We need to think about how we contribute.</p></li>
<li><p>We need to think about sample selection.</p>
<ul>
<li>Criteria based on usage, overlap with protected areas, etc.</li>
<li>How do we remove tourists?</li>
<li>Who is the average person? Estimates will be sensitive</li>
</ul></li>
<li><p>Need to gridded map of ebird observations</p></li>
</ul>
</section>
<section id="next-scripts" class="level1">
<h1>Next scripts</h1>
<ol start="4" type="1">
<li>Merge attributes of the counterfactual sites. Need to collect site level data and/or individual level data
<ul>
<li>Site attributes: biodiversity, accessibility, ruggedness, congestion, temperature, rainfall, regional developmemnt</li>
<li>For first run, just do biodiversity.</li>
<li>Biodiversity comes from either diversity of birds or other attributes of ecosystem diversity</li>
<li>Expected biodiversity is why you go. So we can use historical measures of biodiversity</li>
</ul></li>
<li>Run the mixed logit to estimate the WTP values</li>
<li>Welfare analysis of WTP values</li>
</ol>
</section>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
02/28/25
</div>
<div class='callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end'><i class='callout-toggle'></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<blockquote>
<p>Raahil, Matt, Ryan</p>
</blockquote>
<section id="action-items-1" class="level2">
<h2>Action Items:</h2>
<ul>
<li>Ryan: Get the correct e-bird file from Matt (DONE)</li>
<li>Ryan: Merge code files into scripts folder. (DONE)</li>
<li>Ryan: Initate a document for literature review with template example (DONE)</li>
<li>We need to specalize and define tasks. Volunteer over email. Tasks: Lit review, sample selection, characterize the sample, theory person (DONE)</li>
<li>And set up a recurring meeting time. Need a poll. Try for next two weeks from now. (DONE)</li>
<li>Jovin: Provide your github username so Ryan can make you a collaborator on the github repo. (DONE)</li>
</ul>
</section>
<section id="funding" class="level2">
<h2>Funding:</h2>
<ul>
<li>No longer pursue IonE funding</li>
</ul>
</section>
<section id="coding" class="level2">
<h2>Coding:</h2>
<ul>
<li>Matt was able to replicate everything
<ul>
<li>Created a YAML to process file names</li>
<li>No longer needs new file paths</li>
</ul></li>
<li>Ryan stuck on loading data</li>
<li>Need to all use the same exact file download for e-bird</li>
<li>script 1: processes e-bird data, determines user homes, and calculates home for those who don’t report it.</li>
<li>script 2: Creates the hotspot observations. Measures distance from home to hotspot.</li>
<li>script 3: Most important. 12,000 hotspots so too many counterfactuals. This script reduces the counterfactual set by clustering hotspots nearby (likley parks) and only consider hotspots within a distance of home.</li>
<li>The final data set is a panel of person (user) ID by trip ID appended to all counterfactual trips for this user.</li>
<li>When we actually estimate this, we will need to plan for a no-trip counterfactual.</li>
<li>One of the main things we need to do is make the computation easier for us. Otherwise it becomes too computationally intensive.</li>
<li>Keep all the scripts in scripts folder.</li>
</ul>
</section>
<section id="data" class="level2">
<h2>Data:</h2>
<ul>
<li>We will need to bring in site attribute data</li>
<li>So data on landscape measurements.</li>
<li>Matt says that not all intermediate files are being save</li>
<li>Specifically, the master file is not saving</li>
<li>Need to identify our sample population
<ul>
<li>Need a careful (defensiable) data-driven criteria for sample</li>
<li>Needs to be regular, local users (not temporary or tourists)</li>
<li>Determine this based on usage frequency and mobility patterns</li>
<li>Consider overlaying protected areas polygons on top of the observations/hotspots</li>
<li>Buffers may create a censoring problem. So we would just test this against larger and larger buffers</li>
</ul></li>
<li>Need to find ways to characteristize the users (demographics) without having any information about them.
<ul>
<li>Important for welfare calculations.</li>
<li>Try to match with DHS data</li>
<li>Or overlap home location with SHRUG data set</li>
<li>Econometrically, take attribtues about where they live against the average for the country, how do high and low WTP birders fall within the distribution</li>
<li>Potentially use this as weights for welfare calculations.</li>
</ul></li>
</ul>
</section>
<section id="methods" class="level2">
<h2>Methods:</h2>
<ul>
<li>If we get a random shock to bird population, then we can think about the causal effect of increasing biodiversity</li>
</ul>
</section>
<section id="paperwriting" class="level2">
<h2>Paper/Writing:</h2>
<ul>
<li>For the ML cluster, will want to read up later to find out if there is a better way or more common practice in economics.</li>
<li>Create a lit review. Three groups:
<ol type="1">
<li>estimates of WTP in developing countries generally using the discrete choice travel cost method (Ted Miguel water quality paper).</li>
<li>WTP for environmental quality papers and what design they are using to estimate (e.g., contingent valuation, stated preferences – something from ecology)</li>
<li>Review of any updated versions of the mixed logit model – new adapations of the model from class</li>
</ol></li>
<li>For this: question, data used, design, and finding (dollar estimates would be great).</li>
<li>Create a document in the docs folder</li>
</ul>
</section>
</div>
</div>
</div>
<!-- -->
<div class="quarto-embedded-source-code">
<div class="sourceCode" id="cb3" data-shortcodes="false"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;The Economic Value of Biodiversity in India&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> &quot;Running Notes&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">    - Raahil Madhok</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">    - Matt Braaksma</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">    - Ryan McWay</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">    - Jovin Lasway</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">    html:</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">        theme: sandstone</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">        html-math-method: katex</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">        embed-resources: true</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">        code-fold: true</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">        code-tools: true</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">        code-overflow: wrap</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">    pdf:  </span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">        documentclass: article</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">        papersize: letter</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> false</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="an">jupyter:</span><span class="co"> python3</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># NOTE: Quarto preview will only render the html file</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#       To render both html and pdf file run in terminal: </span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#       quarto render docs/notes.qmd</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="fu">## Project Description</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>This project aims to produce the first measure of willingness to pay (WTP) for biodiversity. </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>This provides a monetary measure to value biodiversity which can be applied to a wide variety of applications in environmental economics and natural captial accounting. </span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>The data relies on E-bird observations of diverse bird species observations. </span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>The sample is limited to local, long-time users who are residents (not tourists) in India.</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>The methodology to calculate WTP relies on a revealed preference throughh the random utility model (RUM). </span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>The RUM determines the value of seeking out diverse species of birds by comparing the value of alternative counterfactual bird siting locations and the cost to go to these counterfactuals. </span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>Monetary value is determined through the RUM by estimating the travel cost of the reveal preference compared to counterfactual locations. </span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="fu">## Notes</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>For notes, we present the most recent first so that notes are chronologically most recent. </span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse=&quot;true&quot;}</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a><span class="fu"># 8/27/2025</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Ryan, Jovin</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a><span class="fu"># TODO: </span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: We need to meet with you to discuss working on this with MSI</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Jovin**: Responsible for Shift</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Ryan**: Responsible for Share</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## Plan to Estimate Shift-Share</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Merge the Species range data with the migratory species data</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Species range data: base-data/species/BOTW_2024_2.gpkg</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Migratory species data: base-data/species/species_list_categorized.csv</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Merge by: scientific_name</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Result: species level data with range map and classifier for migratory</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>For each country $j$, calculate $\gamma_j$</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>\gamma_j = \sum_{s =\text{total num of species in j}}^S \frac{\text{species range overlap India}_{sj}}{S_j}</span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="in">    1. Count the number of species $s$ in $j$</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a><span class="in">        - Species range data: base-data/species/BOTW_2024_2.gpkg</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a><span class="in">        - India Borders: data/shp/district-2011</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a><span class="in">        - Need to make one shape (spatial union) so any intersection with India shape</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a><span class="in">        - Indicator for each species if any overlap of species with India borders</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a><span class="in">    2. Spatial overlap of species $s$ range over the country border of India. This will create some fraction. </span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a><span class="in">        - Calculate sqkm for India shapefile one time (part 1)</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a><span class="in">        - Spatial inner join of range $s$ on India. </span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a><span class="in">        - Calculate sqkm for the inner join (part 2)</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a><span class="in">        - Divide part 2 by part 1 to get the fraction of overlap for species range over India borders</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a><span class="in">    3. Combine to make $\gamma_j$ using the weighted sum $\sum_s$</span></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a><span class="in">        - Spatial intersection of species range $s$ with countries in the flu dataset</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a><span class="in">        - Create the weight $S_j$ by counting the number of indicators for intersecting ranges with $j$</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a><span class="in">        - Create $\gamma_j$ for each $j$ by summing fractions in (2) divided by weight $S_j$</span></span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a><span class="in">        - Country $j$ Shapefiles: TODO.</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Create the shift by merging $\gamma_j$ with the flu data</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Flu Data: data/clean/flu-data.csv</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Result is time series by $t$</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>Shift_t = \sum_{j = country}^J flu_{jt} \times \gamma_j</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Create the share for each hotspot $d$</span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>Share_d =  \sum_s \frac{\text{Indicator for migratory}_{sd}}{S_d}</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a><span class="in">    1. Start with e-bird data. For each hotspot $d$ get the number of unique species observed in the data</span></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a><span class="in">        - e-bird data: Ask Matt what is the best way to do this given the current workflow. </span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a><span class="in">    2. Merge in the migratory data on these species for each hotspot $d$</span></span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a><span class="in">        - Migratory species data: base-data/species/species_list_categorized.csv</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a><span class="in">        - Merge by: scientific_name</span></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a><span class="in">    3. Create the share variable as weighted sum for hotspot $d$</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a><span class="in">        - For hotspot $d$, count indicator for migratory. </span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a><span class="in">        - For hotspot $d$, get count of unique species $S_d$</span></span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a><span class="in">        - Then construct sum of the fractions. </span></span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Create the IV by multiplying the shift by the share for each hotspot $d$</span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>IV_{dt} = shift_t \times share_d</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse=&quot;true&quot;}</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a><span class="fu"># 8/15/2025</span></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Ryan, Matt, Raahil, Jovin</span></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a><span class="fu"># TODO: </span></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: Demean data for State x month fixed effect and user fixed effects </span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: Resolve imputing species richness by estimating correlation of e-bird to bird life data and deflate value</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>**Matt**: Degree of Imputation: Summary stats on % of missing in observed and counterfactual data</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Jovin**: Constructing the shift-share IV</span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a><span class="fu">## Agenda</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Estimation of WTP</span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>negative values came from mismatched polygons</span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Difference from the clipped calipers instead of the original simple circles</span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>weeks sometimes were only 53 (not 54). Solved with iso-week formating that allows for more merging of site attributes</span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Data issue</span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>we don&#39;t observe species richness</span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>So we are imputing with range maps</span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>When there is missing, we currently fill with species map</span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Possible species ranges is always higher than recorded value from e-birders</span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>So the imputed values always are super high when missing, and then this makes our estimates really weird.</span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>This penalizes the choice. Because counterfactual choice has huge species richness</span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Potential Solution: replace missing with historical average (or minimum average) for each district or state in the same time period. </span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Impute that for hotspots with missing data </span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Potential Solution: correlation of bird life data and e-bird observations</span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Then we can just deflate imputed value that rescales this to the e-bird values</span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>What is the main source of missing value? </span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>want summary stats on % of missing in observed and counterfactual data</span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Could make this seasonal species richness for imputed value</span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Fixed Effects Issue</span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>NA for standard errors when adding individual fixed effects</span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Running with python on MSI</span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Could attempt to manually demean data (user fixed effects) before running</span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>State x month fixed effect and user fixed effects </span>
<span id="cb3-150"><a href="#cb3-150" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Robustness by district x month fixed effects </span>
<span id="cb3-151"><a href="#cb3-151" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>This will just be more intense</span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>mlogit does not allow for fixed effects</span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>The key is to demean within each group</span>
<span id="cb3-154"><a href="#cb3-154" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>hdfe is package in Stata</span>
<span id="cb3-155"><a href="#cb3-155" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Instrumental Variables</span>
<span id="cb3-156"><a href="#cb3-156" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Have a map data for bird migration routes</span>
<span id="cb3-157"><a href="#cb3-157" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Only found 2 species public for India </span>
<span id="cb3-158"><a href="#cb3-158" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>There are other species we can request access to</span>
<span id="cb3-159"><a href="#cb3-159" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Data avaliable for avian flu outbreak</span>
<span id="cb3-160"><a href="#cb3-160" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>H5N1</span>
<span id="cb3-161"><a href="#cb3-161" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>2005 - 2025</span>
<span id="cb3-162"><a href="#cb3-162" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Combining the two data sets we can assign outbreaks to specific species that migrate to India</span>
<span id="cb3-163"><a href="#cb3-163" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Human cases of avian flu deaths should be controlled for in IV estimation</span>
<span id="cb3-164"><a href="#cb3-164" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>If we have a shift-share IV, do we need to know the flyways?</span>
<span id="cb3-165"><a href="#cb3-165" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>If this is the only channel, then we don&#39;t need to actually need to know the origin of the bird </span>
<span id="cb3-166"><a href="#cb3-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a>IV_{dt} = shift_t \times share_d</span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-172"><a href="#cb3-172" aria-hidden="true" tabindex="-1"></a>IV_{dt} = \text{Wild Avian Flu}_t \times \text{% of species pool from migration}_d</span>
<span id="cb3-173"><a href="#cb3-173" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a>Shift_t = \sum_{j = country}^J flu_{jt} \times \gamma_j</span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a>\gamma_j = \sum_{s =\text{total num of species in j}}^S \frac{\text{species range overlap India}_{sj}}{S_j}</span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Assumes a uniform distribution of species across their species range</span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>This is an improvement over distance from India as the weight</span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a>Share_d =  \sum_s \frac{\text{Indicator for migratory}_{sd}}{S_d}</span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-190"><a href="#cb3-190" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-191"><a href="#cb3-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-192"><a href="#cb3-192" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse=&quot;true&quot;}</span>
<span id="cb3-193"><a href="#cb3-193" aria-hidden="true" tabindex="-1"></a><span class="fu"># 8/1/2025</span></span>
<span id="cb3-194"><a href="#cb3-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-195"><a href="#cb3-195" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Ryan, Matt, Raahil</span></span>
<span id="cb3-196"><a href="#cb3-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-197"><a href="#cb3-197" aria-hidden="true" tabindex="-1"></a><span class="fu"># TODO: </span></span>
<span id="cb3-198"><a href="#cb3-198" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: Re-estimating WTP using new sample of users (expanded)</span>
<span id="cb3-199"><a href="#cb3-199" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: Adding a Visual: Attempting to run the simple regression of biodiversity and hotspot visitations</span>
<span id="cb3-200"><a href="#cb3-200" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Jovin**: Complete the IV design by finding accompanying data. Maps of migration patterns. Papers to cite for this phenomenon.</span>
<span id="cb3-201"><a href="#cb3-201" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Raahil/Ryan**: Write up the model in LaTeX</span>
<span id="cb3-202"><a href="#cb3-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-203"><a href="#cb3-203" aria-hidden="true" tabindex="-1"></a><span class="fu">## Agenda</span></span>
<span id="cb3-204"><a href="#cb3-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-205"><a href="#cb3-205" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Figures describing variation </span>
<span id="cb3-206"><a href="#cb3-206" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Ryan presented some post estimation figures we tabled for later</span>
<span id="cb3-207"><a href="#cb3-207" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Matt presented some maps showing variation over space</span>
<span id="cb3-208"><a href="#cb3-208" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Raahil suggested we produce a margins plots. We run an endogenous TWFE model of species richness on number of visitors. Then we plot the marginal effects at different levels of biodiversity. </span>
<span id="cb3-209"><a href="#cb3-209" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>First estimates of WTP using super users </span>
<span id="cb3-210"><a href="#cb3-210" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Matt is able to run the conditional logit model. Not able to run the mixed logit model</span>
<span id="cb3-211"><a href="#cb3-211" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Our $\alpha$ for price has the wrong sign. This makes biodiversity WTP a negative value</span>
<span id="cb3-212"><a href="#cb3-212" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>We think that the sample may be too restrictive resulting in weird results </span>
<span id="cb3-213"><a href="#cb3-213" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Additionally, Matt is working through some data issues in the counterfactual data set that is dropping 1.1% of site attributes</span>
<span id="cb3-214"><a href="#cb3-214" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>And there is colinearity amongst site attributes when running the conditional logit, so they are currently dropped in the model run. </span>
<span id="cb3-215"><a href="#cb3-215" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Modeling updates using IV method</span>
<span id="cb3-216"><a href="#cb3-216" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Ryan has a clear idea of how to model the IV into our mixed logit model </span>
<span id="cb3-217"><a href="#cb3-217" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>The key is to rely on Jacob Bradt&#39;s model using control functions. </span>
<span id="cb3-218"><a href="#cb3-218" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>We estimate the first stage linear regression. Residualize. And use the residuals in our discrete choice method (mixed logit). </span>
<span id="cb3-219"><a href="#cb3-219" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>We will need to bootstrap the 2nd stage in our to recover standard errors. </span>
<span id="cb3-220"><a href="#cb3-220" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Bird Migration Instruments</span>
<span id="cb3-221"><a href="#cb3-221" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>(i) Migration patterns: From the literature I&#39;ve compiled so far:</span>
<span id="cb3-222"><a href="#cb3-222" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Peak arrivals: August - November</span>
<span id="cb3-223"><a href="#cb3-223" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Peak departures: February - April</span>
<span id="cb3-224"><a href="#cb3-224" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Low migration periods: May - July, and December - January</span>
<span id="cb3-225"><a href="#cb3-225" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>The Inbound migration: Birds arrive in India primarily from the northern breeding grounds, especially in Mongolia, Kazakhstan, and Siberia, during the August-November window to overwinter in wetlands and coastal areas.</span>
<span id="cb3-226"><a href="#cb3-226" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>The Outbound migration: Birds depart February-April, returning to their breeding sites for nesting.</span>
<span id="cb3-227"><a href="#cb3-227" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>(ii) Drivers of bird migration and IV framework: Ecology literature indicates that migration along the Central Asian Flyway is mainly driven by (i) Ecological reasons, india&#39;s wetlands, lakes, and agricultural landscapes provide abundant food and shelter during winter, (ii) Climatic reasons: Wrmer winter conditions compared to the northern latitudes reduce suruval stress (iii) Stopover importance: Key sites such as Chilika, Keoladeo, Pong Dam, etc serve as staging areas for fueling before onward flights.</span>
<span id="cb3-228"><a href="#cb3-228" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Recent literature uses environmental shocks as instruments (Noack et al., 2024; Meng et al, 2025). For India&#39;s bird migration context, two IV strategies appear promising.</span>
<span id="cb3-229"><a href="#cb3-229" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Weather shock IV: Baseline district exposure (from our eBird) interacting with NVDI and weather anomalies in the breeding grounds.</span>
<span id="cb3-230"><a href="#cb3-230" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Disease shock IV: I find this is more interesting because a recent work by Yang et al., 2024 at Nature Communications finds avian influenza outbreaks do not trigger migration but do affect survival and presence of birds at the Indian stopovers to a very large extent. This makes it a credible instrument because: (i) outbreaks are exogenous to the local economic variables and (ii) outbreak timing is tied to a peak of migration window/CAF (Aug-Nov, Feb-Apr) in India, allowing shocks to coincide with relevant bird presence.</span>
<span id="cb3-231"><a href="#cb3-231" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>(iii) Data collection: Potential outbreak data sources, shapefiles include (i) FAO EMPRES-i+; (ii) WOAH/WAHIS, which tracks the outbreak locations, date, disease type, host species, and status. Lastly, GISAID shapefile data, which is an avian influenza sequence database, tracks the outbreak locations (used in Elbe &amp; Buckland-Merrett, 2017, Global Challenges Journal; Yang et al, 2024, Nature Communications).</span>
<span id="cb3-232"><a href="#cb3-232" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>(iv) Next step: Performing a spatial join between outbreak data and our ebird-based hotspots, aggregating outbreak counts to the district/hotspot-year panel level. I think this will allow us to construct the avian influenza IV as = Baseline exposure in district/hotspot d  x outbreak shock at time t.</span>
<span id="cb3-233"><a href="#cb3-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-234"><a href="#cb3-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-235"><a href="#cb3-235" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-236"><a href="#cb3-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-237"><a href="#cb3-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-238"><a href="#cb3-238" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse=&quot;true&quot;}</span>
<span id="cb3-239"><a href="#cb3-239" aria-hidden="true" tabindex="-1"></a><span class="fu"># 6/2/2025</span></span>
<span id="cb3-240"><a href="#cb3-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-241"><a href="#cb3-241" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Ryan, Matt, Jovin, Raahil</span></span>
<span id="cb3-242"><a href="#cb3-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-243"><a href="#cb3-243" aria-hidden="true" tabindex="-1"></a><span class="fu"># TODO: </span></span>
<span id="cb3-244"><a href="#cb3-244" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: Finish species richness site attribute (cluster-time level)</span>
<span id="cb3-245"><a href="#cb3-245" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: Finish computing congestion site attribute</span>
<span id="cb3-246"><a href="#cb3-246" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt**: Check why sample size so big. Check number of elements in the choice set for validation.</span>
<span id="cb3-247"><a href="#cb3-247" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Matt/Ryan**: Compute species richness in radius *around home* (varying at same time unit as other species richness attribute)</span>
<span id="cb3-248"><a href="#cb3-248" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Jovin**: Fix travel cost. I suggest checking it over with Matt/Ryan</span>
<span id="cb3-249"><a href="#cb3-249" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Raahil/Ryan**: Work through paper framing</span>
<span id="cb3-250"><a href="#cb3-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-251"><a href="#cb3-251" aria-hidden="true" tabindex="-1"></a><span class="fu">## Agenda</span></span>
<span id="cb3-252"><a href="#cb3-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-253"><a href="#cb3-253" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Species Richness </span>
<span id="cb3-254"><a href="#cb3-254" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Maps for imputation can&#39;t have the shannon index. Because we don&#39;t have abundance counts</span>
<span id="cb3-255"><a href="#cb3-255" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>But we can do an index for the e-bird data hotspots</span>
<span id="cb3-256"><a href="#cb3-256" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Estimates of bird life and expected species richness </span>
<span id="cb3-257"><a href="#cb3-257" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Monthly values or seasonal values </span>
<span id="cb3-258"><a href="#cb3-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-259"><a href="#cb3-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-260"><a href="#cb3-260" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Other Site Attributes </span>
<span id="cb3-261"><a href="#cb3-261" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Have one site data set for temp, rain, and tree cover</span>
<span id="cb3-262"><a href="#cb3-262" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>This is at the hotspot cluster level </span>
<span id="cb3-263"><a href="#cb3-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-264"><a href="#cb3-264" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Congestion </span>
<span id="cb3-265"><a href="#cb3-265" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ready to go code, just not run yet</span>
<span id="cb3-266"><a href="#cb3-266" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="sc">\#</span> of users at hotspot cluster monthly</span>
<span id="cb3-267"><a href="#cb3-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-268"><a href="#cb3-268" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Travel Cost</span>
<span id="cb3-269"><a href="#cb3-269" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jovin has choice set and code that estmates this for a first attempt </span>
<span id="cb3-270"><a href="#cb3-270" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Matched to GDP data to impute wages </span>
<span id="cb3-271"><a href="#cb3-271" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Estimate Euclidean distance between households and hotspot clusters </span>
<span id="cb3-272"><a href="#cb3-272" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Final data for RUM should be choice set dimensions (for our checks)</span>
<span id="cb3-273"><a href="#cb3-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-274"><a href="#cb3-274" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Measure of Experience at the Individual Level </span>
<span id="cb3-275"><a href="#cb3-275" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Counts of trips (counter)</span>
<span id="cb3-276"><a href="#cb3-276" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Count for <span class="sc">\#</span> of different hotspots (counter)</span>
<span id="cb3-277"><a href="#cb3-277" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>So ratio tells us if you have  preference for location (&quot;Habit Formation&quot;). </span>
<span id="cb3-278"><a href="#cb3-278" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Low ratio is little location preference</span>
<span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>High ratio is high location preference</span>
<span id="cb3-280"><a href="#cb3-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-281"><a href="#cb3-281" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>Conceptual</span>
<span id="cb3-282"><a href="#cb3-282" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Birds vs. non-bird still valued as travel cost. So both are still measures of nature recreation. </span>
<span id="cb3-283"><a href="#cb3-283" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Monetizing value &gt;&gt; Add in contribute to GEP or ecosystem service value literature. </span>
<span id="cb3-284"><a href="#cb3-284" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Novelty: Why is WTP lower in Developing Countries? Welfare for environmental quality in envirodevonomics framework (Env-Dev framing)</span>
<span id="cb3-285"><a href="#cb3-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-286"><a href="#cb3-286" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-287"><a href="#cb3-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-288"><a href="#cb3-288" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse=&quot;true&quot;}</span>
<span id="cb3-289"><a href="#cb3-289" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5/16/2025</span></span>
<span id="cb3-290"><a href="#cb3-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-291"><a href="#cb3-291" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Ryan, Matt, Jovin, Raahil</span></span>
<span id="cb3-292"><a href="#cb3-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-293"><a href="#cb3-293" aria-hidden="true" tabindex="-1"></a><span class="fu"># TODO: </span></span>
<span id="cb3-294"><a href="#cb3-294" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Seperate meetings for Matt/Jovin (coding) and Ryan/Raahil (conception) for our specializations</span>
<span id="cb3-295"><a href="#cb3-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-296"><a href="#cb3-296" aria-hidden="true" tabindex="-1"></a><span class="fu">## Agenda</span></span>
<span id="cb3-297"><a href="#cb3-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-298"><a href="#cb3-298" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Finalize the site attribute data and create the master dataset</span>
<span id="cb3-299"><a href="#cb3-299" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Matt and Ryan -- complete by next meeting (May 16)</span>
<span id="cb3-300"><a href="#cb3-300" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We have monthly temperature and rainfall</span>
<span id="cb3-301"><a href="#cb3-301" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We have annual tree cover data</span>
<span id="cb3-302"><a href="#cb3-302" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>These are as zonal statistics (average for 10KM radius of hotspot)</span>
<span id="cb3-303"><a href="#cb3-303" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>In E-bird, we have the average distance walked around hotspot</span>
<span id="cb3-304"><a href="#cb3-304" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Or do we avoid this work because temp, rain, and tree cover does not vary much at such a small spatial scale.</span>
<span id="cb3-305"><a href="#cb3-305" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Temp, rainfall, and tree are at higher resolutions. So as long as the radius is less than the input data this will not vary. </span>
<span id="cb3-306"><a href="#cb3-306" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need to think more about mapping of hotspots and hotspot clusters. </span>
<span id="cb3-307"><a href="#cb3-307" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to add a fourth site attribute: congestion</span>
<span id="cb3-308"><a href="#cb3-308" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>How frequently other users are using this site? </span>
<span id="cb3-309"><a href="#cb3-309" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Aggregate number of user trips for each hotspot but will need to do this as a lag (week before)</span>
<span id="cb3-310"><a href="#cb3-310" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>So this is expected congestion. </span>
<span id="cb3-311"><a href="#cb3-311" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need to transform this into a panel of counterfactual sets appended to the observed trips. </span>
<span id="cb3-312"><a href="#cb3-312" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Not balanced across counterfactual trips and time </span>
<span id="cb3-313"><a href="#cb3-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-314"><a href="#cb3-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-315"><a href="#cb3-315" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Calculate travel costs -- see notes for guidance; this will be added to the site attribute script</span>
<span id="cb3-316"><a href="#cb3-316" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>For GDP per capita data, use gridded data from here and extract the value closest to each users&#39; home. Then use the formula from Kolstoe/cameron or lloyd-smith to calculate travel costs. </span>
<span id="cb3-317"><a href="#cb3-317" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jovin -- complete by next meeting (May 16)</span>
<span id="cb3-318"><a href="#cb3-318" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Collected 2014-2024 GDP per capita data</span>
<span id="cb3-319"><a href="#cb3-319" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Laptop trouble estimating, working with MPC.</span>
<span id="cb3-320"><a href="#cb3-320" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Could run the travel cost with a small random sample to make this managable for Jovin&#39;s laptop capacity.</span>
<span id="cb3-321"><a href="#cb3-321" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Can re-run the pipeline so we are running for only frequent users (1.6M instead of the 3M)</span>
<span id="cb3-322"><a href="#cb3-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-323"><a href="#cb3-323" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Species richness </span>
<span id="cb3-324"><a href="#cb3-324" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Matt and Ryan -- bring three ideas for next meeting (May 16)</span>
<span id="cb3-325"><a href="#cb3-325" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Close to being done (Matt taking the lead)</span>
<span id="cb3-326"><a href="#cb3-326" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Taking raw e-bird data and getting monthly counts</span>
<span id="cb3-327"><a href="#cb3-327" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to translate from hotspots to hotspot clusters</span>
<span id="cb3-328"><a href="#cb3-328" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Species ranges (for missing) shapefiles are crashing the code.</span>
<span id="cb3-329"><a href="#cb3-329" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>All of this is to get a species at a hotspot so we can turn this into a richness index </span>
<span id="cb3-330"><a href="#cb3-330" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Will want this merged as richness for same month/week from previous year</span>
<span id="cb3-331"><a href="#cb3-331" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>In the app, you can see in real-time species count from their favorite places. </span>
<span id="cb3-332"><a href="#cb3-332" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>So likely quite responsive. Last week is best</span>
<span id="cb3-333"><a href="#cb3-333" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Can also do monthly to replicate results from month last year from Kolsto paper method. </span>
<span id="cb3-334"><a href="#cb3-334" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We aim to use the simpson and shanon index from <span class="in">`vegan`</span> package</span>
<span id="cb3-335"><a href="#cb3-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-336"><a href="#cb3-336" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Individual Attributes</span>
<span id="cb3-337"><a href="#cb3-337" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>With individual fixed effects, we partial out any time-invariant</span>
<span id="cb3-338"><a href="#cb3-338" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>From the e-bird data:</span>
<span id="cb3-339"><a href="#cb3-339" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>How frequently you went in the past year</span>
<span id="cb3-340"><a href="#cb3-340" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Average distance traveled in the past year </span>
<span id="cb3-341"><a href="#cb3-341" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Is there any measure of learning over time? Value of recreation is not static</span>
<span id="cb3-342"><a href="#cb3-342" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Experience index</span>
<span id="cb3-343"><a href="#cb3-343" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Cumulative experience (simple counter of trips up unti that point)</span>
<span id="cb3-344"><a href="#cb3-344" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Could weight this by how much you walk, and taxonomy of bird level data (raw text file of trip-species level)</span>
<span id="cb3-345"><a href="#cb3-345" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Could collapse species count to trip level. </span>
<span id="cb3-346"><a href="#cb3-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-347"><a href="#cb3-347" aria-hidden="true" tabindex="-1"></a><span class="fu">## Project Management</span></span>
<span id="cb3-348"><a href="#cb3-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-349"><a href="#cb3-349" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Meetings need to be in person. </span>
<span id="cb3-350"><a href="#cb3-350" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jovin update meeting calendar </span>
<span id="cb3-351"><a href="#cb3-351" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Start assigning tasks instead of asking for volunteers</span>
<span id="cb3-352"><a href="#cb3-352" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to come up with a specialization of tasks. </span>
<span id="cb3-353"><a href="#cb3-353" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Coding and Data: Matt (lead), Jovin, Ryan (assist)</span>
<span id="cb3-354"><a href="#cb3-354" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Conceptualize: Ryan (lead), and Raahil</span>
<span id="cb3-355"><a href="#cb3-355" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>How our model departs from workhouse. </span>
<span id="cb3-356"><a href="#cb3-356" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Literature review for our novelty</span>
<span id="cb3-357"><a href="#cb3-357" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Some tasks: </span>
<span id="cb3-358"><a href="#cb3-358" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Google maps driving time</span>
<span id="cb3-359"><a href="#cb3-359" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>inaturalist species richness mapping</span>
<span id="cb3-360"><a href="#cb3-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-361"><a href="#cb3-361" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-362"><a href="#cb3-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-363"><a href="#cb3-363" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse=&quot;true&quot;}</span>
<span id="cb3-364"><a href="#cb3-364" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5/15/2025</span></span>
<span id="cb3-365"><a href="#cb3-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-366"><a href="#cb3-366" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Ryan, Matt</span></span>
<span id="cb3-367"><a href="#cb3-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-368"><a href="#cb3-368" aria-hidden="true" tabindex="-1"></a><span class="fu">## Coding Notes</span></span>
<span id="cb3-369"><a href="#cb3-369" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ryan is taking lead on estimating travel cost. </span>
<span id="cb3-370"><a href="#cb3-370" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need a seperate hotspots shapefile for running zonal stats </span>
<span id="cb3-371"><a href="#cb3-371" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need unique hotspot site IDs and hotspot cluster IDs</span>
<span id="cb3-372"><a href="#cb3-372" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Explor alternatives to making hotspot clusters </span>
<span id="cb3-373"><a href="#cb3-373" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Name for the master data</span>
<span id="cb3-374"><a href="#cb3-374" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to add attributes to hotspot clusters (script 4)</span>
<span id="cb3-375"><a href="#cb3-375" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Mapping of hotspot cluster ID to hotspot IDs</span>
<span id="cb3-376"><a href="#cb3-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-377"><a href="#cb3-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-378"><a href="#cb3-378" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-379"><a href="#cb3-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-380"><a href="#cb3-380" aria-hidden="true" tabindex="-1"></a>::: {.callout-note collapse=&quot;true&quot;}</span>
<span id="cb3-381"><a href="#cb3-381" aria-hidden="true" tabindex="-1"></a><span class="fu"># 5/2/2025</span></span>
<span id="cb3-382"><a href="#cb3-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-383"><a href="#cb3-383" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Raahil, Matt</span></span>
<span id="cb3-384"><a href="#cb3-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-385"><a href="#cb3-385" aria-hidden="true" tabindex="-1"></a><span class="fu">## Agenda</span></span>
<span id="cb3-386"><a href="#cb3-386" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Site attributes data progress</span>
<span id="cb3-387"><a href="#cb3-387" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>In progress</span>
<span id="cb3-388"><a href="#cb3-388" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Individual attributes data progress</span>
<span id="cb3-389"><a href="#cb3-389" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Coding sample selection progress</span>
<span id="cb3-390"><a href="#cb3-390" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Done, flexible to time period and years (e.g. quarterly for at least 8 years)</span>
<span id="cb3-391"><a href="#cb3-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-392"><a href="#cb3-392" aria-hidden="true" tabindex="-1"></a><span class="fu">## Site Attributes</span></span>
<span id="cb3-393"><a href="#cb3-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-394"><a href="#cb3-394" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Still gathering geospatial data</span>
<span id="cb3-395"><a href="#cb3-395" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="co">[</span><span class="ot">MODIS VCF forest cover</span><span class="co">](https://lpdaac.usgs.gov/products/mod44bv061/)</span></span>
<span id="cb3-396"><a href="#cb3-396" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span><span class="co">[</span><span class="ot">Copernicus ERA5-Land</span><span class="co">](https://cds.climate.copernicus.eu/datasets/reanalysis-era5-land?tab=download)</span></span>
<span id="cb3-397"><a href="#cb3-397" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span><span class="co">[</span><span class="ot">ecmwfr</span><span class="co">](https://bluegreen-labs.github.io/ecmwfr/)</span>, R API interface</span>
<span id="cb3-398"><a href="#cb3-398" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Run zonal statistics on buffer around hotspots</span>
<span id="cb3-399"><a href="#cb3-399" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>If data becomes to large to easily share, we can start using Globus and MSI&#39;s tier 2 data storage</span>
<span id="cb3-400"><a href="#cb3-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-401"><a href="#cb3-401" aria-hidden="true" tabindex="-1"></a><span class="fu">## Next tasks</span></span>
<span id="cb3-402"><a href="#cb3-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-403"><a href="#cb3-403" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Merge site and individual attributes to make master dataset</span>
<span id="cb3-404"><a href="#cb3-404" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Calculate travel cost</span>
<span id="cb3-405"><a href="#cb3-405" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Start with linear distance for now</span>
<span id="cb3-406"><a href="#cb3-406" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Calculate cost</span>
<span id="cb3-407"><a href="#cb3-407" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Refer to Lloyd-Smith and Cameron/Kolstoe</span>
<span id="cb3-408"><a href="#cb3-408" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Travel cost = 2 (round trip) x distance x 1/3 x wage (from GDP)</span>
<span id="cb3-409"><a href="#cb3-409" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Species Richness</span>
<span id="cb3-410"><a href="#cb3-410" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Decide on method: </span>
<span id="cb3-411"><a href="#cb3-411" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Weitzman index</span>
<span id="cb3-412"><a href="#cb3-412" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>iNaturalist</span>
<span id="cb3-413"><a href="#cb3-413" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Simpson index </span>
<span id="cb3-414"><a href="#cb3-414" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Shannon index</span>
<span id="cb3-415"><a href="#cb3-415" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Looking ahead</span>
<span id="cb3-416"><a href="#cb3-416" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Look at code for estimating mixed logit with big data</span>
<span id="cb3-417"><a href="#cb3-417" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span><span class="co">[</span><span class="ot">mixl</span><span class="co">](https://github.com/joemolloy/fast-mixed-mnl)</span>, C++ based R package</span>
<span id="cb3-418"><a href="#cb3-418" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span><span class="co">[</span><span class="ot">xlogit</span><span class="co">](https://xlogit.readthedocs.io/en/latest/index.html)</span>, GPU-Accelerated Python Package</span>
<span id="cb3-419"><a href="#cb3-419" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>How to properly weight the WTP for aggregation</span>
<span id="cb3-420"><a href="#cb3-420" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- - [Weighting the Evidence: A Rank-Dependent Model of Outdoor Recreation](https://doi-org.ezp1.lib.umn.edu/10.1086/732185) --&gt;</span></span>
<span id="cb3-421"><a href="#cb3-421" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Research how to include fixed effects in utility functions (alternative specific constant)</span>
<span id="cb3-422"><a href="#cb3-422" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>User fixed effects </span>
<span id="cb3-423"><a href="#cb3-423" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>hotspot fixed effects</span>
<span id="cb3-424"><a href="#cb3-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-425"><a href="#cb3-425" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-426"><a href="#cb3-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-427"><a href="#cb3-427" aria-hidden="true" tabindex="-1"></a>::: {.callout-note  collapsse=&quot;true&quot;}</span>
<span id="cb3-428"><a href="#cb3-428" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4/25/2025</span></span>
<span id="cb3-429"><a href="#cb3-429" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Matt, Ryan</span></span>
<span id="cb3-430"><a href="#cb3-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-431"><a href="#cb3-431" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tasks: </span></span>
<span id="cb3-432"><a href="#cb3-432" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Matt: Download data and share</span>
<span id="cb3-433"><a href="#cb3-433" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ryan: Start writing pseudocode in the new scripts. </span>
<span id="cb3-434"><a href="#cb3-434" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Both: Play with ClimateR </span>
<span id="cb3-435"><a href="#cb3-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-436"><a href="#cb3-436" aria-hidden="true" tabindex="-1"></a><span class="fu">## Site Attributes</span></span>
<span id="cb3-437"><a href="#cb3-437" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Limitation: </span>
<span id="cb3-438"><a href="#cb3-438" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>It takes time to build GIS data. So a lot of the attributes are not updated for 2024/25</span>
<span id="cb3-439"><a href="#cb3-439" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>ClimateR</span>
<span id="cb3-440"><a href="#cb3-440" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Division of the attributes to collect</span>
<span id="cb3-441"><a href="#cb3-441" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Protected area (binary or distance) -- fuzzy borders leads to spillovers</span>
<span id="cb3-442"><a href="#cb3-442" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Matt</span>
<span id="cb3-443"><a href="#cb3-443" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>WDPA (https://www.protectedplanet.net/en/thematic-areas/wdpa?tab=WDPA)</span>
<span id="cb3-444"><a href="#cb3-444" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Tree cover -- higher willingess to pay for forest</span>
<span id="cb3-445"><a href="#cb3-445" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Matt</span>
<span id="cb3-446"><a href="#cb3-446" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>https://data.fs.usda.gov/geodata/rastergateway/treecanopycover/</span>
<span id="cb3-447"><a href="#cb3-447" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>https://data.globalforestwatch.org/</span>
<span id="cb3-448"><a href="#cb3-448" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>https://glad.umd.edu/dataset/global-2010-tree-cover-30-m</span>
<span id="cb3-449"><a href="#cb3-449" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Worse comes to worse we use the ESA data</span>
<span id="cb3-450"><a href="#cb3-450" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Or we could use NDVI data as a proxy.</span>
<span id="cb3-451"><a href="#cb3-451" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Rainfall (monthly) - seasonality</span>
<span id="cb3-452"><a href="#cb3-452" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Ryan</span>
<span id="cb3-453"><a href="#cb3-453" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>https://ftp.cpc.ncep.noaa.gov/GIS/GRADS_GIS/GeoTIFF/GLB_DLY_PREC/</span>
<span id="cb3-454"><a href="#cb3-454" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>CHRIPS SPI data</span>
<span id="cb3-455"><a href="#cb3-455" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>https://mikejohnson51.github.io/climateR/index.html</span>
<span id="cb3-456"><a href="#cb3-456" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Temperature (monthly) - seasonality</span>
<span id="cb3-457"><a href="#cb3-457" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Ryan</span>
<span id="cb3-458"><a href="#cb3-458" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>GISS Surface Temperature Analysis (GISTEMP v3)</span>
<span id="cb3-459"><a href="#cb3-459" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Surface air temperature (no ocean data), 250km smoothing (9 MB)</span>
<span id="cb3-460"><a href="#cb3-460" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Might need the land mask</span>
<span id="cb3-461"><a href="#cb3-461" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>https://data.giss.nasa.gov/gistemp/</span>
<span id="cb3-462"><a href="#cb3-462" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Distance to the coast -- species gradient to the coast</span>
<span id="cb3-463"><a href="#cb3-463" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Ryan</span>
<span id="cb3-464"><a href="#cb3-464" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Dissolve the districts data. </span>
<span id="cb3-465"><a href="#cb3-465" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Make a polyline and measure distance to the nearest line</span>
<span id="cb3-466"><a href="#cb3-466" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Species richness from the previous week (expectation) -- and any other measures of biodiversity</span>
<span id="cb3-467"><a href="#cb3-467" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Both Matt and Ryan</span>
<span id="cb3-468"><a href="#cb3-468" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Weitzmen index using ebird data to generate diversity score</span>
<span id="cb3-469"><a href="#cb3-469" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>https://scholar.harvard.edu/files/weitzman/files/on_diversity.pdf</span>
<span id="cb3-470"><a href="#cb3-470" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Validate with inaturalist data on birds for india</span>
<span id="cb3-471"><a href="#cb3-471" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Could test a couple of different indices</span>
<span id="cb3-472"><a href="#cb3-472" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How we are sharing the site attribute data</span>
<span id="cb3-473"><a href="#cb3-473" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Matt will have the GDrive link. </span>
<span id="cb3-474"><a href="#cb3-474" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Updating the config files </span>
<span id="cb3-475"><a href="#cb3-475" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Once we have data download</span>
<span id="cb3-476"><a href="#cb3-476" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Start script to merge site attributes to sites</span>
<span id="cb3-477"><a href="#cb3-477" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>What to do about 4.demographics. Seems like that should be site attributes. </span>
<span id="cb3-478"><a href="#cb3-478" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Noteably, some of the data will need to become panel. </span>
<span id="cb3-479"><a href="#cb3-479" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Rainfall</span>
<span id="cb3-480"><a href="#cb3-480" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Temperature</span>
<span id="cb3-481"><a href="#cb3-481" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Protected Areas</span>
<span id="cb3-482"><a href="#cb3-482" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Tree cover</span>
<span id="cb3-483"><a href="#cb3-483" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>species richness (we need to dig some that has a time dimension)</span>
<span id="cb3-484"><a href="#cb3-484" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Static: </span>
<span id="cb3-485"><a href="#cb3-485" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Distance to coast</span>
<span id="cb3-486"><a href="#cb3-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-487"><a href="#cb3-487" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-488"><a href="#cb3-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-489"><a href="#cb3-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-490"><a href="#cb3-490" aria-hidden="true" tabindex="-1"></a>::: {.callout-note  collapse=&quot;true&quot;}</span>
<span id="cb3-491"><a href="#cb3-491" aria-hidden="true" tabindex="-1"></a><span class="fu"># 4/18/2025</span></span>
<span id="cb3-492"><a href="#cb3-492" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Raahil, Matt, Jovin, Ryan</span></span>
<span id="cb3-493"><a href="#cb3-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-494"><a href="#cb3-494" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sample Selection Updates</span></span>
<span id="cb3-495"><a href="#cb3-495" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>different biodiversity levels by incorporating interaction terms in locals and tourists. WTP for nature tourism vs WTP for nature recreation or biodiverstiy</span>
<span id="cb3-496"><a href="#cb3-496" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>If we estimate both, then we can compare both measures. We can also place it within the larger literature of many WTP for both subsets of ecosystem services and the population using those services. </span>
<span id="cb3-497"><a href="#cb3-497" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Broadly compare conservation, nature recreation, tourism, or biodiversity </span>
<span id="cb3-498"><a href="#cb3-498" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>We need to frame this as a development paper as the lambda in the Envirodevonomics paper</span>
<span id="cb3-499"><a href="#cb3-499" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Frequency of observations are consistent over time and potentially visits near protected areas. </span>
<span id="cb3-500"><a href="#cb3-500" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Need to capture seasonanlity (time fixed effects)</span>
<span id="cb3-501"><a href="#cb3-501" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Need to consider some aspect of congestion (can calculate that as a site attribute)</span>
<span id="cb3-502"><a href="#cb3-502" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>If you go two months a year you are less likely to be a tourist</span>
<span id="cb3-503"><a href="#cb3-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-504"><a href="#cb3-504" aria-hidden="true" tabindex="-1"></a><span class="fu">## Literature Review Updates</span></span>
<span id="cb3-505"><a href="#cb3-505" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We can uses species richness as an explanatory variable in the model. But could add other biodiversity measures beyond bird diversity. </span>
<span id="cb3-506"><a href="#cb3-506" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to think about how to frame this in the developing context instead of the environment context</span>
<span id="cb3-507"><a href="#cb3-507" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Very few WTP for environmental quality in development economics space </span>
<span id="cb3-508"><a href="#cb3-508" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Would be great if our WTP measure could be placed within a welfare model so we can make counterfactual statements</span>
<span id="cb3-509"><a href="#cb3-509" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Need to have homogenous agents to aggregate for welfare gains &gt;&gt; e-bird users are not representative of population</span>
<span id="cb3-510"><a href="#cb3-510" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Could overcome this by population demographic weights to make e-bird users representative</span>
<span id="cb3-511"><a href="#cb3-511" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>But welfare statements are a big improvement over the other e-bird papers</span>
<span id="cb3-512"><a href="#cb3-512" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Could explore the WTP measure of space and time. So we go beyond the cross-sectional estimates in the literature </span>
<span id="cb3-513"><a href="#cb3-513" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>If we have 1st and 2nd moment, then we can assign individuals an individual WTP. </span>
<span id="cb3-514"><a href="#cb3-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-515"><a href="#cb3-515" aria-hidden="true" tabindex="-1"></a><span class="fu">## Grant Proposal</span></span>
<span id="cb3-516"><a href="#cb3-516" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jovin will provide an update. </span>
<span id="cb3-517"><a href="#cb3-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-518"><a href="#cb3-518" aria-hidden="true" tabindex="-1"></a><span class="fu">## Initial Results by Raahil </span></span>
<span id="cb3-519"><a href="#cb3-519" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We are getting coverage of the country </span>
<span id="cb3-520"><a href="#cb3-520" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Some overlap of population density and users &gt;&gt; likely representative</span>
<span id="cb3-521"><a href="#cb3-521" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Most hotspots and users are in the south (consistent with e-birder users)</span>
<span id="cb3-522"><a href="#cb3-522" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Hotspots data could be weighted by visits</span>
<span id="cb3-523"><a href="#cb3-523" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Should plot protected areas overlapping hotspots</span>
<span id="cb3-524"><a href="#cb3-524" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Demographic t-test shows e-bird users are richer on average. But we can use this to back out our inverse weight for the welfare calculations</span>
<span id="cb3-525"><a href="#cb3-525" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>E-bird users are selecting into this where there are richer places (so can afford this hobby)</span>
<span id="cb3-526"><a href="#cb3-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-527"><a href="#cb3-527" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tasks</span></span>
<span id="cb3-528"><a href="#cb3-528" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>How do we distinguish ourselves from the Pacific Northwest paper Kolestet 2017</span>
<span id="cb3-529"><a href="#cb3-529" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>First pass of the sample: users who use this at least 2 months out of the year</span>
<span id="cb3-530"><a href="#cb3-530" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Make two new scripts: </span>
<span id="cb3-531"><a href="#cb3-531" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Merging in site attributes (Can merge in satilette data -- radius around the centriod and take the mean -- and district data about the site attribtues -- merge on district ID)</span>
<span id="cb3-532"><a href="#cb3-532" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Protected area (binary or distance) -- fuzzy borders leads to spillovers</span>
<span id="cb3-533"><a href="#cb3-533" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Tree cover -- higher willingess to pay for forest</span>
<span id="cb3-534"><a href="#cb3-534" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Rainfall (monthly) - seasonality</span>
<span id="cb3-535"><a href="#cb3-535" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Temperature (monthly) - seasonality</span>
<span id="cb3-536"><a href="#cb3-536" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Distance to the coast -- species gradient to the coast</span>
<span id="cb3-537"><a href="#cb3-537" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Species richness from the previous week (expectation) -- and any other measures of biodiversity</span>
<span id="cb3-538"><a href="#cb3-538" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Estimating the RUM via the mixed multinominal logit</span>
<span id="cb3-539"><a href="#cb3-539" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Email tag for grant proposals</span>
<span id="cb3-540"><a href="#cb3-540" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Make a script into a single PDF</span>
<span id="cb3-541"><a href="#cb3-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-542"><a href="#cb3-542" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-543"><a href="#cb3-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-544"><a href="#cb3-544" aria-hidden="true" tabindex="-1"></a>::: {.callout-note  collapse=&quot;true&quot;}</span>
<span id="cb3-545"><a href="#cb3-545" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3/31/2025</span></span>
<span id="cb3-546"><a href="#cb3-546" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Raahil, Matt, Jovin</span></span>
<span id="cb3-547"><a href="#cb3-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-548"><a href="#cb3-548" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sample Selection Discussion</span></span>
<span id="cb3-549"><a href="#cb3-549" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We want to ensure that the sample of ebird observers is representative</span>
<span id="cb3-550"><a href="#cb3-550" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Remove tourists</span>
<span id="cb3-551"><a href="#cb3-551" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Remove infrequent users</span>
<span id="cb3-552"><a href="#cb3-552" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Potential strategies </span>
<span id="cb3-553"><a href="#cb3-553" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Limit to users that log at least a certain number of times per month</span>
<span id="cb3-554"><a href="#cb3-554" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Exclude users that post outside of protected areas</span>
<span id="cb3-555"><a href="#cb3-555" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Exclude users that include tourism tags in text variable(e.g. &quot;ecolodge&quot;)</span>
<span id="cb3-556"><a href="#cb3-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-557"><a href="#cb3-557" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tasks</span></span>
<span id="cb3-558"><a href="#cb3-558" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Matt/Jovin: descriptive analysis on data to determine distributions of frequent users</span>
<span id="cb3-559"><a href="#cb3-559" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Complete by 4/18</span>
<span id="cb3-560"><a href="#cb3-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-561"><a href="#cb3-561" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-562"><a href="#cb3-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-563"><a href="#cb3-563" aria-hidden="true" tabindex="-1"></a>::: {.callout-note  collapse=&quot;true&quot;}</span>
<span id="cb3-564"><a href="#cb3-564" aria-hidden="true" tabindex="-1"></a><span class="fu"># 3/21/2025</span></span>
<span id="cb3-565"><a href="#cb3-565" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Raahil, Matt, Ryan, Jovin</span></span>
<span id="cb3-566"><a href="#cb3-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-567"><a href="#cb3-567" aria-hidden="true" tabindex="-1"></a><span class="fu">## Action Items: </span></span>
<span id="cb3-568"><a href="#cb3-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-569"><a href="#cb3-569" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Everyone confirms that we can run the first 3 basic scripts</span>
<span id="cb3-570"><a href="#cb3-570" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Starting the annotated bibliography with 10 most important papers: </span>
<span id="cb3-571"><a href="#cb3-571" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>WTP for envrionmental quality </span>
<span id="cb3-572"><a href="#cb3-572" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>WTP in developing countries using travel cost</span>
<span id="cb3-573"><a href="#cb3-573" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Review of mixed logit methodology</span>
<span id="cb3-574"><a href="#cb3-574" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Next week we need to talk about sample selection in depth next week </span>
<span id="cb3-575"><a href="#cb3-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-576"><a href="#cb3-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-577"><a href="#cb3-577" aria-hidden="true" tabindex="-1"></a><span class="fu"># Division of Tasks: </span></span>
<span id="cb3-578"><a href="#cb3-578" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Review mixed logit method</span>
<span id="cb3-579"><a href="#cb3-579" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>(Matt) Review of WTP in developing countries using travel cost methods</span>
<span id="cb3-580"><a href="#cb3-580" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>(Ryan) Review of WTP methods for environmental quality</span>
<span id="cb3-581"><a href="#cb3-581" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>(Ryan) Method to estimate welfare effects (some exogenous shock)</span>
<span id="cb3-582"><a href="#cb3-582" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>(Raahil + Jovin + Matt) Determining the sample population criteria -- important early step</span>
<span id="cb3-583"><a href="#cb3-583" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>(Raahil) Gathering data for population demographics (SHRUG, DHS, etc.)</span>
<span id="cb3-584"><a href="#cb3-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-585"><a href="#cb3-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-586"><a href="#cb3-586" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ways to annoate bibliography: </span>
<span id="cb3-587"><a href="#cb3-587" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>paper title + journal,  research question, research design (e.g. stated preference), data/sample size, result (i.e. WTP estimate)</span>
<span id="cb3-588"><a href="#cb3-588" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need to think about how we contribute. </span>
<span id="cb3-589"><a href="#cb3-589" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need to think about sample selection. </span>
<span id="cb3-590"><a href="#cb3-590" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Criteria based on usage, overlap with protected areas, etc. </span>
<span id="cb3-591"><a href="#cb3-591" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>How do we remove tourists? </span>
<span id="cb3-592"><a href="#cb3-592" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Who is the average person? Estimates will be sensitive</span>
<span id="cb3-593"><a href="#cb3-593" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to gridded map of ebird observations</span>
<span id="cb3-594"><a href="#cb3-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-595"><a href="#cb3-595" aria-hidden="true" tabindex="-1"></a><span class="fu"># Next scripts</span></span>
<span id="cb3-596"><a href="#cb3-596" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Merge attributes of the counterfactual sites. Need to collect site level data and/or individual level data </span>
<span id="cb3-597"><a href="#cb3-597" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Site attributes: biodiversity, accessibility, ruggedness, congestion, temperature, rainfall, regional developmemnt</span>
<span id="cb3-598"><a href="#cb3-598" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>For first run, just do biodiversity. </span>
<span id="cb3-599"><a href="#cb3-599" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Biodiversity comes from either diversity of birds or other attributes of ecosystem diversity</span>
<span id="cb3-600"><a href="#cb3-600" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Expected biodiversity is why you go. So we can use historical measures of biodiversity</span>
<span id="cb3-601"><a href="#cb3-601" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span>Run the mixed logit to estimate the WTP values</span>
<span id="cb3-602"><a href="#cb3-602" aria-hidden="true" tabindex="-1"></a><span class="ss">6. </span>Welfare analysis of WTP values</span>
<span id="cb3-603"><a href="#cb3-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-604"><a href="#cb3-604" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb3-605"><a href="#cb3-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-606"><a href="#cb3-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-607"><a href="#cb3-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-608"><a href="#cb3-608" aria-hidden="true" tabindex="-1"></a>::: {.callout-note  collapse=&quot;true&quot;}</span>
<span id="cb3-609"><a href="#cb3-609" aria-hidden="true" tabindex="-1"></a><span class="fu"># 02/28/25</span></span>
<span id="cb3-610"><a href="#cb3-610" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Raahil, Matt, Ryan</span></span>
<span id="cb3-611"><a href="#cb3-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-612"><a href="#cb3-612" aria-hidden="true" tabindex="-1"></a><span class="fu">## Action Items: </span></span>
<span id="cb3-613"><a href="#cb3-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-614"><a href="#cb3-614" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ryan: Get the correct e-bird file from Matt (DONE)</span>
<span id="cb3-615"><a href="#cb3-615" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ryan: Merge code files into scripts folder. (DONE)</span>
<span id="cb3-616"><a href="#cb3-616" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ryan: Initate a document for literature review with template example (DONE)</span>
<span id="cb3-617"><a href="#cb3-617" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We need to specalize and define tasks. Volunteer over email. Tasks: Lit review, sample selection, characterize the sample, theory person (DONE)</span>
<span id="cb3-618"><a href="#cb3-618" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>And set up a recurring meeting time. Need a poll. Try for next two weeks from now. (DONE)</span>
<span id="cb3-619"><a href="#cb3-619" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jovin: Provide your github username so Ryan can make you a collaborator on the github repo.  (DONE)</span>
<span id="cb3-620"><a href="#cb3-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-621"><a href="#cb3-621" aria-hidden="true" tabindex="-1"></a><span class="fu">## Funding: </span></span>
<span id="cb3-622"><a href="#cb3-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-623"><a href="#cb3-623" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>No longer pursue IonE funding</span>
<span id="cb3-624"><a href="#cb3-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-625"><a href="#cb3-625" aria-hidden="true" tabindex="-1"></a><span class="fu">## Coding: </span></span>
<span id="cb3-626"><a href="#cb3-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-627"><a href="#cb3-627" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Matt was able to replicate everything </span>
<span id="cb3-628"><a href="#cb3-628" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Created a YAML to process file names</span>
<span id="cb3-629"><a href="#cb3-629" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>No longer needs new file paths</span>
<span id="cb3-630"><a href="#cb3-630" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ryan stuck on loading data</span>
<span id="cb3-631"><a href="#cb3-631" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to all use the same exact file download for e-bird</span>
<span id="cb3-632"><a href="#cb3-632" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>script 1: processes e-bird data, determines user homes, and calculates home for those who don&#39;t report it. </span>
<span id="cb3-633"><a href="#cb3-633" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>script 2: Creates the hotspot observations. Measures distance from home to hotspot.</span>
<span id="cb3-634"><a href="#cb3-634" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>script 3: Most important. 12,000 hotspots so too many counterfactuals. This script reduces the counterfactual set by clustering hotspots nearby (likley parks) and only consider hotspots within a distance of home. </span>
<span id="cb3-635"><a href="#cb3-635" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The final data set is a panel of person (user) ID by trip ID appended to all counterfactual trips for this user. </span>
<span id="cb3-636"><a href="#cb3-636" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>When we actually estimate this, we will need to plan for a no-trip counterfactual. </span>
<span id="cb3-637"><a href="#cb3-637" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>One of the main things we need to do is make the computation easier for us. Otherwise it becomes too computationally intensive. </span>
<span id="cb3-638"><a href="#cb3-638" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Keep all the scripts in scripts folder. </span>
<span id="cb3-639"><a href="#cb3-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-640"><a href="#cb3-640" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data: </span></span>
<span id="cb3-641"><a href="#cb3-641" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We will need to bring in site attribute data </span>
<span id="cb3-642"><a href="#cb3-642" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>So data on landscape measurements. </span>
<span id="cb3-643"><a href="#cb3-643" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Matt says that not all intermediate files are being save</span>
<span id="cb3-644"><a href="#cb3-644" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Specifically, the master file is not saving</span>
<span id="cb3-645"><a href="#cb3-645" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to identify our sample population</span>
<span id="cb3-646"><a href="#cb3-646" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Need a careful (defensiable) data-driven criteria for sample </span>
<span id="cb3-647"><a href="#cb3-647" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Needs to be regular, local users (not temporary or tourists)</span>
<span id="cb3-648"><a href="#cb3-648" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Determine this based on usage frequency and mobility patterns</span>
<span id="cb3-649"><a href="#cb3-649" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Consider overlaying protected areas polygons on top of the observations/hotspots</span>
<span id="cb3-650"><a href="#cb3-650" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Buffers may create a censoring problem. So we would just test this against larger and larger buffers</span>
<span id="cb3-651"><a href="#cb3-651" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to find ways to characteristize the users (demographics) without having any information about them. </span>
<span id="cb3-652"><a href="#cb3-652" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Important for welfare calculations. </span>
<span id="cb3-653"><a href="#cb3-653" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Try to match with DHS data </span>
<span id="cb3-654"><a href="#cb3-654" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Or overlap home location with SHRUG data set</span>
<span id="cb3-655"><a href="#cb3-655" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Econometrically, take attribtues about where they live against the average for the country, how do high and low WTP birders fall within the distribution</span>
<span id="cb3-656"><a href="#cb3-656" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Potentially use this as weights for welfare calculations. </span>
<span id="cb3-657"><a href="#cb3-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-658"><a href="#cb3-658" aria-hidden="true" tabindex="-1"></a><span class="fu">## Methods:</span></span>
<span id="cb3-659"><a href="#cb3-659" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>If we get a random shock to bird population, then we can think about the causal effect of increasing biodiversity</span>
<span id="cb3-660"><a href="#cb3-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-661"><a href="#cb3-661" aria-hidden="true" tabindex="-1"></a><span class="fu">## Paper/Writing: </span></span>
<span id="cb3-662"><a href="#cb3-662" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>For the ML cluster, will want to read up later to find out if there is a better way or more common practice in economics. </span>
<span id="cb3-663"><a href="#cb3-663" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Create a lit review. Three groups: </span>
<span id="cb3-664"><a href="#cb3-664" aria-hidden="true" tabindex="-1"></a><span class="ss">    1. </span>estimates of WTP in developing countries generally using the discrete choice travel cost method (Ted Miguel water quality paper). </span>
<span id="cb3-665"><a href="#cb3-665" aria-hidden="true" tabindex="-1"></a><span class="ss">    2. </span>WTP for environmental quality papers and what design they are using to estimate (e.g., contingent valuation, stated preferences -- something from ecology)</span>
<span id="cb3-666"><a href="#cb3-666" aria-hidden="true" tabindex="-1"></a><span class="ss">    3. </span>Review of any updated versions of the mixed logit model -- new adapations of the model from class</span>
<span id="cb3-667"><a href="#cb3-667" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>For this: question, data used, design, and finding (dollar estimates would be great).</span>
<span id="cb3-668"><a href="#cb3-668" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Create a document in the docs folder</span>
<span id="cb3-669"><a href="#cb3-669" aria-hidden="true" tabindex="-1"></a>:::</span></code></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->

</body>

</html>
